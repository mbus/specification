\documentclass[landscape]{article}

\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
\usepackage{amssymb} % For \checkmark
\usepackage{
  tikz,
  tikz-timing,
}
\usetikzlibrary{positioning}
\pagenumbering{gobble}

\newcommand{\bus}{MBus\xspace}

\begin{document}

\input{timing}

% \figTimingInducedGlitch
%
% Find the figure you want and copy it here. You only want the area inside of
% the tikztimingtable (so it doesn't print caption / etc)
%
% Then use the 'pdfcrop' utility to trim the whitespace
\centering
  \footnotesize
  \begin{tikztimingtable}[timing/wscale=3.0,timing/slope=.3]
    %          10011 EE EE IIIIII SS X110 0II
    CLK In   & CCCCC CC CC CHHHHH HC CCCC CCC\\
    CLK Out  & CCCCC CC CC CHHHHH HC CCCC CCC\\
    Data In  & HHLLH HH HH HCCCCC CH HHHL LHH\\
    Data Out & HHLLH HH HH HCCCCC CH HHHL LHH\\
             & {1D{Data 1}}{2D{Data 0}}{2D{Data 1}}
               {2D{Data 1}}{2D{Data 1}}{6D{Interrupt}}{2D{Switch Role}}
               {2D{Ctl Bit 0}}{2D{ACK=True}}{2D{Idle}}{1D{\ldots}} \\
    \\
    % TX Node
    CLK In   & CCCCC CC CC CHHHHH HC CCCC CCC\\
    CLK Out  & CCCCC CH HH HHHHHH HC CCCC CCC\\
    Data In  & HHLLH HH HH HCCCCC CH HHHL LHH\\
    Data Out & HHLLH HH HH HCCCCC CH HHHL LHH\\
             & {1D{Data 1}}{2D{Data 0}}{2D{Data 1}}
               {4D{Req Interrupt}}{6D{Interrupt}}{2D{Switch Role}}
               {2D{EoM=True}}{2D{Ctl Bit 1}}{2D{Idle}}{1D{\ldots}} \\
    \\
    CLK In   & CCCCC CH HH HHHHHH HC CCCC CCC\\
    CLK Out  & CCCCC CH HH HHHHHH HC CCCC CCC\\
    Data In  & HHLLH HH HH HCCCCC CH HHHL LHH\\
    Data Out & HHLLH HH HH HCCCCC CH HHHL LHH\\
             & {1D{Data 1}}{2D{Data 0}}{2D{Data 1}}
               {10D{Interrupt}}{2D{Switch Role}}
               {2D{Ctl Bit 0}}{2D{Ctl Bit 1}}{2D{Idle}}{1D{\ldots}} \\
    \\
    % CTL Node
    CLK In   & CCCCC CH HH HHHHHH HC CCCC CCC\\
    CLK Out  & CCCCC CC CC CHHHHH HC CCCC CCC\\
    Data In  & HHLLH HH HH HCCCCC CH HHHL LHH\\
    Data Out & HHLLH HH HH HCCCCC CH HHHL LHH\\
    Int Clk  & CCCCC CC CC CCCCCC CC CCCC CCC\\
             & {1D{Data 1}}{2D{Data 0}}{2D{Data 1}}
               {4D{Enter Interrupt}}{6D{Interrupt}}{2D{Switch Role}}
               {2D{Ctl Bit 0}}{2D{Ctl Bit 1}}{2D{Idle}}{1D{\ldots}} \\
  \extracode
    \begin{pgfonlayer}{background}
      \begin{scope}[semithick,dashed]
        \vertlines[color=red]{3,9,...,27}
        \vertlines[color=gray]{6,12,...,15}
        \vertlines[color=blue]{45,51,...,\twidth}
        \vertlines[color=OliveGreen]{48,54,...,\twidth}

        \filldraw[yellow,opacity=.25] (15, 2) rectangle (27, -45);
      \end{scope}
    \end{pgfonlayer}

    \draw[red,thick]    (21,  -2.5) ellipse (1.25 and 4.5);
    \draw[red,thick]    (27,  -2.5) ellipse (1.25 and 4.5);
    \draw[blue,thick]   (45,  -2.5) ellipse (1.25 and 4.5);
    \draw[green,thick]  (45, -26.5) ellipse (1.25 and 4.5);
    \draw[cyan,thick]   (21, -36.5) ellipse (1.25 and 2.5);
    %\draw[cyan,semithick,dashed] (21,-44.5) to (21,-33.25); % .25 better dash
    \node at (18, -7.5)  {\huge\color{blue} X};
    \node at (24, -7.5)  {\huge\color{blue} X};
    \node at (18, -31.5) {\huge\color{green} $\checkmark$};
    \node at (24, -31.5) {\huge\color{green} $\checkmark$};

    \begin{scope}
      [font=\bf\sffamily,shift={(-5.5em,-1.5)},anchor=east,color=blue]
      \node [rotate=45] at (  0,   0) {1};
      \node [rotate=45] at (  0, -12) {2 (TX)};
      \node [rotate=45] at (  0, -24) {3};
      \node [rotate=45] at (  0, -36) {conductor};
    \end{scope}

    \begin{scope}
      [font=\sc\scriptsize,shift={(-1,5.5)},anchor=north,align=center]
      \node [rotate=45] at ( 3, 0) {Latch\\Bit~6};
      %\node [rotate=45] at ( 6, 0) {Drive\\Bit~7};
      \node [rotate=45] at ( 9, 0) {Latch\\Bit~7};
      %\node [rotate=45] at (12, 0) {Drive\\Bit~8};
      \node [rotate=45] at (15, 0) {Latch~\textbar~Req\\Bit~8~\textbar~Int};
      \node [rotate=45] at (21, 0) {Detect\\Int Req};
      \node [rotate=45] at (27, 0) {Begin\\Interrupt};

      \node [rotate=45] at (45, 0) {Interrupt\\Asserted};
      \node [rotate=45] at (51, 0) {Begin\\Control};
      \node [rotate=45] at (57, 0) {Latch\\Ctl Bit~0};
      \node [rotate=45] at (63, 0) {Latch\\Ctl Bit~1};
      \node [rotate=45] at (69, 0) {Begin\\Idle};
    \end{scope}

    \foreach \n [evaluate=\n as \l using int((\n-1)/3)] in {3,6,...,\twidth}
      \draw (\n,-46.5) -- +(0,-.2)
        node [below,inner sep=2pt] {\scalebox{.75}{\footnotesize\l}};
  \end{tikztimingtable}

\end{document}
