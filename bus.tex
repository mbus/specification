\documentclass[twoside]{article}
\usepackage[layout=letterpaper,margin=1in]{geometry}

%\usepackage{bold-extra} % for bf sc

\usepackage[font={normalsize,sf,bf}]{caption}
\usepackage{fancyhdr}
\usepackage{fixltx2e}
\usepackage{xspace}
\usepackage{cleveref}
\usepackage{color}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{comment}
\usepackage{soul} % provides \hl{}
\newcommand{\hlc}[2][yellow]{{\sethlcolor{#1}\hl{#2}}}
\usepackage[normalem]{ulem} % provides \uline{}
\usepackage{listings}
\usepackage{amssymb} % For \checkmark
\usepackage{amsmath} % For \text, \underbrace
\usepackage{varwidth}

\usepackage[section]{placeins} % Don't let figs escape their section

\usepackage[all=normal,lists]{savetrees}

\usepackage{rotating}
\usepackage[endianness=big]{bytefield}
\bytefieldsetup{boxformatting={\centering\footnotesize}}

\usepackage{multirow}
\usepackage{tabularx}
\usepackage{nth}
\usepackage{moresize}
\usepackage{framed}
\usepackage{mdframed}

\usepackage{
  tikz,
  tikz-timing,
}
\usetikzlibrary{positioning}

\usepackage[nofancy]{svninfo}

\usepackage[colorlinks=true,bookmarksopen=true,bookmarksopenlevel=2]{hyperref}

\newcommand{\colorbitbox}[3]{%
\rlap{\bitbox{#2}{\color{#1}\rule{\width}{\height}}}%
\bitbox{#2}{#3}}

% From bytefield package documentation:
%   facilitates the creation of memory maps. Start address at the bottom,
%   end address at the top.
%   syntax:
%   \memsection{end address}{start address}{height in lines}{text in box}
\newcommand{\memsection}[4]{%
  % define the height of the memsection
  \bytefieldsetup{bitheight=#3\baselineskip}%
  \bitbox[]{8}{%
    \texttt{#1}% print end address
    \\
    % do some spacing
    \vspace{#3\baselineskip}
    \vspace{-2\baselineskip}
    \vspace{-#3pt}
    \texttt{#2}% print start address
  }%
  \bitbox{24}{#4}% print box with caption
}
\newcommand{\memsectionhuge}[4]{%
  \bitbox[]{8}{\texttt{#1}}
  \wordbox[lrt]{1}{#4} \\
  \bitbox[]{8}{\dots}
  \skippedwords \\
  \bitbox[]{8}{\texttt{#2}}
  \wordbox[lrb]{1}{#4}
}

\definecolor{lightblue}{RGB}{0,204,255}
\definecolor{lightcyan}{rgb}{0.84,1,1}
\definecolor{lightgreen}{rgb}{0.64,1,0.71}
\definecolor{lightergreen}{rgb}{0.84,1,0.87}
\definecolor{lightred}{rgb}{1,0.7,0.71}

\definecolor{OliveGreen}{cmyk}{0.64,0,0.95,0.40}

\newcommand{\bus}{MBus\xspace}
\newcommand{\proto}{MPQ\xspace}
\newcommand{\CLK}{\texttt{CLK}\xspace}
\newcommand{\CLKIN}{\texttt{CLK\textsubscript{IN}}\xspace}
\newcommand{\CLKOUT}{\texttt{CLK\textsubscript{OUT}}\xspace}
\newcommand{\DAT}{\texttt{DATA}\xspace}
\newcommand{\DATZERO}{\texttt{DATA0}\xspace}
\newcommand{\DIN}{\texttt{DATA\textsubscript{IN}}\xspace}
\newcommand{\DOUT}{\texttt{DATA\textsubscript{OUT}}\xspace}
\newcommand{\mbuscopy}{MBus~\textcopyright~$2012-2015$~The Regents of the University of Michigan}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\svnInfo $Id$ 

\pagestyle{fancyplain}

\fancyfoot[LO,RE]{\footnotesize \ifnum\thepage=1 ~\else \mbuscopy \fi}
\fancyfoot[C]{\ifnum\thepage=1 \mbuscopy \fi}
\fancyfoot[LE,RO]{\ifnum\thepage=1 ~\else \thepage \fi}

%\fancyhf{}
%\fancyfoot[C]{\thepage}
%\fancyhead[C]{\em CONFIDENTIAL DRAFT --- DO NOT CITE OR DISTRIBUTE}

\title{MBus Specification}
%\author{Pat Pannuto, Yoonmyung Lee, Ye-Sheng Kuo, ZhiYoong Foo, Ben Kempke,
%David Blaauw, Prabal Dutta\\$<$ppannuto@umich.edu$>$}
\author{%
  {\em $<$mbus-team@umich.edu$>$}\\
  \\
  Pat Pannuto $<$ppannuto@umich.edu$>$\\
  Yoonmyung Lee $<$sori@umich.edu$>$\\
  Ye-Sheng Kuo $<$samkuo@umich.edu$>$\\
  ZhiYoong Foo $<$zhiyoong@umich.edu$>$\\
  Ben Kempke $<$bpkempke@umich.edu$>$\\
  David Blaauw $<$blaauw@umich.edu$>$\\
  Prabal Dutta $<$prabal@umich.edu$>$
}
\date{Revision 0.3+ --- Working Revision}
\maketitle

\input{overview}

\tableofcontents
\clearpage

\input{requirements}
\clearpage

\input{node_design}
\clearpage

\input{bus_design}
\clearpage

\input{power_design}
\clearpage

\input{address_design}
\clearpage

\input{protocol}
\clearpage

\input{mpq}
\clearpage

\input{programmer_model}
\clearpage

\input{specifications}
\clearpage

\input{todo}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\clearpage
\section{Document Revision History}
\label{sec:revisions}

\begin{itemize}

\item Revision 0.4 {\footnotesize(rXXXX)} --
  \subitem Pull in protocol documentation to this specification
  \subitem Register read always returns length requested, wrapping if needed
  \subitem Memory bulk transfer always returns length requirements, wrapping
  if needed
  \subitem Add start address to register read
  \subitem Add DMA start address to memory bulk read
  \subitem Add memory stream protocol
  \subitem Add tests appendix
  \subitem Simplify interaction of broadcast messages and power states
  \subitem Remove specification of broadcast channels 2 and 3
  \subitem Interrupt $\rightarrow$ interjection
  \subitem Master $\rightarrow$ mediator
  \subitem Pull MPQ programmer model into this spec

\item Revision 0.3 {\footnotesize(r7650)} -- April 18, 2013
\subitem Add full M3 team to the authors list
\subitem Add reserved edges to arbitration

\item Revision 0.2 {\footnotesize(r4516)} -- May 6, 2013
\subitem Add Broadcast Channel 3
\subitem Clean up some of the more dated requirements text
\subitem Terminology change, ``control'' to ``master'' node

\item Revision 0.1 {\footnotesize(r4333)} -- Apr 22, 2012
\subitem Initial revision

\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\clearpage
\appendix

\input{tests}

\input{scratchpad}

\end{document}
